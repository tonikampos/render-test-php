# üé® GALITROCO - Frontend Angular# Frontend



**Autor:** Antonio Campos  This project was generated using [Angular CLI](https://github.com/angular/angular-cli) version 19.2.0.

**Universidad:** Universitat Oberta de Catalunya (UOC)  

**Asignatura:** Trabajo Final de M√°ster (PEC2)  ## Development server

**Fecha:** Octubre-Noviembre 2025

To start a local development server, run:

---

```bash

## üìã DESCRIPCI√ìNng serve

```

Frontend web desarrollado en **Angular 19** para GaliTroco, una plataforma de intercambio de habilidades y servicios. Consume la API REST del backend para gestionar usuarios, habilidades, intercambios, mensajer√≠a y valoraciones.

Once the server is running, open your browser and navigate to `http://localhost:4200/`. The application will automatically reload whenever you modify any of the source files.

**Estado del frontend:** ‚úÖ **95% implementado** (todas las funcionalidades principales operativas)

## Code scaffolding

---

Angular CLI includes powerful code scaffolding tools. To generate a new component, run:

## üõ†Ô∏è STACK TECNOL√ìGICO FRONTEND

```bash

| Componente | Tecnolog√≠a | Versi√≥n |ng generate component component-name

|------------|------------|---------|```

| **Framework** | Angular | 19.2.0 |

| **Lenguaje** | TypeScript | 5.7.2 |For a complete list of available schematics (such as `components`, `directives`, or `pipes`), run:

| **UI Library** | Angular Material | 19.2.19 |

| **HTTP Client** | HttpClient | Con RxJS 7.8 |```bash

| **Routing** | Angular Router | 19.2.0 |ng generate --help

| **Forms** | Reactive Forms | Angular Forms |```

| **Build Tool** | Angular CLI | 19.2.0 |

| **Package Manager** | npm | 10.9.2 |## Building

| **Node Runtime** | Node.js | 18.20.5 |

| **Hosting** | Render.com | Static Site |To build the project run:



### Caracter√≠sticas principales:```bash

- ‚úÖ **Dise√±o responsive** (Mobile, Tablet, Desktop)ng build

- ‚úÖ **Material Design** (componentes Angular Material)```

- ‚úÖ **Autenticaci√≥n persistente** (guards y interceptores)

- ‚úÖ **Lazy Loading** de m√≥dulos por rutasThis will compile your project and store the build artifacts in the `dist/` directory. By default, the production build optimizes your application for performance and speed.

- ‚úÖ **Reactive Forms** con validaci√≥n en tiempo real

- ‚úÖ **RxJS** para gesti√≥n de estado y observables## Running unit tests

- ‚úÖ **Interceptores HTTP** para manejo de errores y autenticaci√≥n

To execute unit tests with the [Karma](https://karma-runner.github.io) test runner, use the following command:

---

```bash

## üåê URL DEL FRONTEND DESPLEGADOng test

```

### Producci√≥n (Render.com) - **RECOMENDADO PARA PRUEBAS PEC2**

## Running end-to-end tests

```

https://galitroco-frontend.onrender.comFor end-to-end (e2e) testing, run:

```

```bash

**Estado:** ‚úÖ Operativo 24/7  ng e2e

**Deploy:** Autom√°tico desde GitHub (branch `main`)  ```

**Backend API:** https://render-test-php-1.onrender.com/api.php

Angular CLI does not come with an end-to-end testing framework by default. You can choose one that suits your needs.

> **Nota:** El frontend consume la API REST del backend desplegada en Render.

## Additional Resources

---

For more information on using the Angular CLI, including detailed command references, visit the [Angular CLI Overview and Command Reference](https://angular.dev/tools/cli) page.

## üë§ CREDENCIALES DE PRUEBA

Utiliza estos usuarios para probar la aplicaci√≥n:

### Usuario A (Intercambios)
```
Email:    test_6937@testmail.com
Password: Pass123456
ID:       21
Rol:      usuario
```

### Usuario B (Intercambios)
```
Email:    userB_6566@testing.com
Password: Pass123456
ID:       23
Rol:      usuario
```

### Administrador (Panel Admin)
```
Email:    admin@galitroco.com
Password: Admin123456
Rol:      administrador
```

---

## üß™ C√ìMO PROBAR EL FRONTEND (RECOMENDADO PARA PEC2)

### ‚ö° Opci√≥n 1: Acceso Directo a Producci√≥n - **M√ÅS R√ÅPIDO**

**No requiere instalaci√≥n local.** Simplemente abre el navegador:

```
https://galitroco-frontend.onrender.com
```

#### Ventajas:
- ‚úÖ **Cero configuraci√≥n** - Solo necesitas un navegador
- ‚úÖ **Datos reales** - Base de datos Supabase con datos de prueba
- ‚úÖ **√öltima versi√≥n** - Auto-deploy desde GitHub
- ‚è±Ô∏è **Tiempo de prueba:** 20-30 minutos (flujo completo)

---

## üìã GU√çA DE PRUEBAS PASO A PASO

### üîê 1. AUTENTICACI√ìN (3 minutos)

#### 1.1 Probar Login
1. Ir a: `https://galitroco-frontend.onrender.com/login`
2. Ingresar credenciales:
   - Email: `test_6937@testmail.com`
   - Password: `Pass123456`
3. Click en **"Iniciar sesi√≥n"**
4. **Resultado esperado:** Redirecci√≥n al dashboard

#### 1.2 Probar Registro
1. Ir a: `https://galitroco-frontend.onrender.com/registro`
2. Completar formulario:
   - Nombre de usuario: `evaluador_test_` + timestamp
   - Email: `evaluador@test.com`
   - Contrase√±a: `Test123456`
   - Confirmar contrase√±a: `Test123456`
   - Ubicaci√≥n: `A Coru√±a`
3. Click en **"Registrarse"**
4. **Resultado esperado:** Registro exitoso + redirecci√≥n al login

#### 1.3 Verificar Persistencia de Sesi√≥n
1. Cerrar navegador completamente
2. Abrir navegador y volver a: `https://galitroco-frontend.onrender.com`
3. **Resultado esperado:** Usuario sigue autenticado (sesi√≥n persiste)

#### 1.4 Probar Logout
1. Click en icono de usuario (esquina superior derecha)
2. Click en **"Cerrar sesi√≥n"**
3. **Resultado esperado:** Redirecci√≥n a login + sesi√≥n cerrada

---

### üéØ 2. GESTI√ìN DE HABILIDADES (5 minutos)

#### 2.1 Ver Cat√°logo P√∫blico
1. Login como `test_6937@testmail.com`
2. Ir a: **"Explorar Habilidades"** (men√∫ lateral o navbar)
3. **Resultado esperado:** 
   - Lista de habilidades p√∫blicas
   - Filtros por categor√≠a
   - Buscador por palabra clave
   - Tarjetas con informaci√≥n (t√≠tulo, categor√≠a, usuario, ubicaci√≥n)

#### 2.2 Filtrar por Categor√≠a
1. En "Explorar Habilidades", seleccionar categor√≠a: `Tecnolog√≠a e Inform√°tica`
2. **Resultado esperado:** Solo habilidades de esa categor√≠a

#### 2.3 Buscar por Palabra Clave
1. En el buscador, escribir: `ingl√©s`
2. **Resultado esperado:** Habilidades que contengan "ingl√©s" en t√≠tulo o descripci√≥n

#### 2.4 Ver Detalle de Habilidad
1. Click en una tarjeta de habilidad
2. **Resultado esperado:** 
   - Modal/p√°gina con informaci√≥n completa
   - T√≠tulo, descripci√≥n, categor√≠a, duraci√≥n estimada
   - Informaci√≥n del usuario propietario
   - Bot√≥n **"Proponer Intercambio"** (si no es tuya)

#### 2.5 Crear Nueva Habilidad
1. Ir a: **"Mis Habilidades"** ‚Üí **"Nueva Habilidad"**
2. Completar formulario:
   - Tipo: `Oferta`
   - Categor√≠a: `Tecnolog√≠a e Inform√°tica`
   - T√≠tulo: `Clases de Python para principiantes`
   - Descripci√≥n: `Ense√±o programaci√≥n en Python desde cero, orientado a objetos y aplicaciones web`
   - Duraci√≥n estimada: `60` minutos
3. Click en **"Publicar"**
4. **Resultado esperado:** 
   - Mensaje de √©xito
   - Habilidad visible en "Mis Habilidades"
   - Estado: `Activa`

#### 2.6 Editar Habilidad
1. En "Mis Habilidades", click en **icono de editar** (l√°piz) de la habilidad reci√©n creada
2. Modificar el t√≠tulo: `Clases de Python avanzado + Django`
3. Click en **"Guardar cambios"**
4. **Resultado esperado:** Cambios reflejados inmediatamente

#### 2.7 Pausar/Activar Habilidad
1. Click en bot√≥n **"Pausar"** de una habilidad
2. **Resultado esperado:** 
   - Estado cambia a `Pausada`
   - No visible en b√∫squedas p√∫blicas
   - Chip/badge muestra "Pausada"
3. Click en **"Activar"** nuevamente
4. **Resultado esperado:** Estado vuelve a `Activa`

---

### üîÑ 3. SISTEMA DE INTERCAMBIOS COMPLETO (10 minutos)

#### 3.1 Proponer Intercambio (Usuario A)
1. Login como `test_6937@testmail.com`
2. Ir a **"Explorar Habilidades"**
3. Buscar una habilidad que te interese (de otro usuario)
4. Click en la habilidad ‚Üí **"Proponer Intercambio"**
5. En el di√°logo:
   - Seleccionar **tu habilidad** a ofrecer (dropdown)
   - Escribir mensaje: `Hola, me interesa tu habilidad. ¬øPodemos intercambiar?`
6. Click en **"Enviar Propuesta"**
7. **Resultado esperado:**
   - Mensaje de confirmaci√≥n
   - Propuesta visible en **"Mis Intercambios"** ‚Üí Pesta√±a **"Enviados"**
   - Estado: `Propuesto`

#### 3.2 Ver Propuestas Recibidas (Usuario B)
1. **Cerrar sesi√≥n** de Usuario A
2. Login como `userB_6566@testing.com`
3. Ir a **"Mis Intercambios"** ‚Üí Pesta√±a **"Recibidos"**
4. **Resultado esperado:**
   - Ver la propuesta recibida
   - Informaci√≥n completa: habilidades, usuario proponente, mensaje
   - Botones: **"Aceptar"** y **"Rechazar"**

#### 3.3 Aceptar Propuesta
1. Click en **"Aceptar"** en la propuesta recibida
2. Confirmar en el di√°logo
3. **Resultado esperado:**
   - Estado cambia a `Aceptado`
   - Chip/badge color verde
   - Aparece bot√≥n **"Ver Conversaci√≥n"**
   - Aparece bot√≥n **"Marcar como Completado"**

#### 3.4 Completar Intercambio
1. En un intercambio **Aceptado**, click en **"Marcar como Completado"**
2. Confirmar acci√≥n
3. **Resultado esperado:**
   - Estado cambia a `Completado`
   - Chip/badge color azul
   - Aparece bot√≥n **"Valorar Usuario"**

#### 3.5 Valorar Usuario
1. Click en **"Valorar Usuario"**
2. En el di√°logo de valoraci√≥n:
   - Seleccionar puntuaci√≥n: **5 estrellas** (click en las estrellas)
   - Escribir comentario: `Excelente experiencia, muy profesional y puntual`
3. Click en **"Enviar Valoraci√≥n"**
4. **Resultado esperado:**
   - Mensaje de √©xito
   - Valoraci√≥n registrada
   - Ya no se puede valorar de nuevo

---

### üîç 4. B√öSQUEDA Y FILTROS (3 minutos)

#### 4.1 Filtrar por Tipo (Oferta/Demanda)
1. En "Explorar Habilidades", seleccionar filtro: `Solo Ofertas`
2. **Resultado esperado:** Solo habilidades tipo "Oferta"

#### 4.2 Filtrar por Ubicaci√≥n
1. Seleccionar: `Santiago de Compostela`
2. **Resultado esperado:** Solo usuarios de Santiago

#### 4.3 Combinar Filtros
1. Seleccionar categor√≠a: `Clases y Formaci√≥n`
2. Escribir en buscador: `ingl√©s`
3. Tipo: `Oferta`
4. **Resultado esperado:** Habilidades que cumplan todos los criterios

---

### üëÆ 5. PANEL DE ADMINISTRACI√ìN (Solo Admin - 5 minutos)

#### 5.1 Acceso al Panel
1. **Cerrar sesi√≥n** de usuario normal
2. Login como `admin@galitroco.com` / `Admin123456`
3. Ir a **"Panel de Administraci√≥n"** (men√∫ lateral)
4. **Resultado esperado:** 
   - Acceso permitido (solo admins)
   - Dashboard con widgets de estad√≠sticas

#### 5.2 Ver Estad√≠sticas
1. En el dashboard admin, verificar widgets:
   - **Total de usuarios registrados**
   - **Total de habilidades publicadas**
   - **Intercambios completados**
   - **Valoraci√≥n promedio de la plataforma**
2. **Resultado esperado:** Estad√≠sticas en tiempo real desde la BD

#### 5.3 Gestionar Usuarios
1. Ir a pesta√±a **"Usuarios"** en el panel admin
2. **Resultado esperado:**
   - Tabla con todos los usuarios
   - Columnas: ID, Nombre, Email, Rol, Estado, Fecha registro
   - Filtros y buscador

---

## ‚úÖ CHECKLIST DE VERIFICACI√ìN FRONTEND

Marca cada funcionalidad despu√©s de probarla:

### **Autenticaci√≥n:**
- [ ] Login con credenciales correctas
- [ ] Registro de nuevo usuario
- [ ] Validaci√≥n de formularios (campos vac√≠os, email inv√°lido, etc.)
- [ ] Persistencia de sesi√≥n (refresh de p√°gina)
- [ ] Logout funciona correctamente

### **Habilidades:**
- [ ] Ver cat√°logo p√∫blico (sin login)
- [ ] Crear nueva habilidad (tipo oferta/demanda)
- [ ] Editar habilidad propia
- [ ] Pausar/Activar habilidad
- [ ] Ver detalle de habilidad
- [ ] Filtrar por categor√≠a
- [ ] Buscar por palabra clave

### **Intercambios:**
- [ ] Proponer intercambio
- [ ] Ver propuestas enviadas
- [ ] Ver propuestas recibidas
- [ ] Aceptar propuesta (solo receptor)
- [ ] Rechazar propuesta (solo receptor)
- [ ] Marcar como completado
- [ ] Estados visuales correctos (chips de colores)

### **Valoraciones:**
- [ ] Valorar usuario despu√©s de intercambio completado
- [ ] Sistema de estrellas (1-5) funciona
- [ ] Comentario se guarda correctamente
- [ ] No se puede valorar dos veces el mismo intercambio

### **Panel Admin:**
- [ ] Solo admins acceden al panel
- [ ] Usuarios normales ven error 403
- [ ] Estad√≠sticas se calculan correctamente
- [ ] Listar todos los usuarios

### **UI/UX:**
- [ ] Dise√±o responsive (m√≥vil, tablet, desktop)
- [ ] Material Design consistente
- [ ] Validaci√≥n de formularios en tiempo real
- [ ] Mensajes de error/√©xito claros

---

## üîß INSTALACI√ìN LOCAL (Opcional)

### Prerrequisitos:
- Node.js 18+ (recomendado: 18.20.5)
- npm 10+
- Git

### Pasos:

#### 1. Clonar repositorio
```bash
git clone https://github.com/tonikampos/render-test-php.git
cd render-test-php/frontend
```

#### 2. Instalar dependencias
```bash
npm install
```

**Tiempo estimado:** 2-3 minutos

#### 3. Configurar URL del backend (Opcional)

El frontend est√° configurado para usar el backend de **producci√≥n** por defecto.

**Archivo:** `src/environments/environment.ts`

```typescript
export const environment = {
  production: false,
  // Backend en Render (por defecto)
  apiUrl: 'https://render-test-php-1.onrender.com/api.php'
  
  // O backend local (si lo tienes corriendo):
  // apiUrl: 'http://localhost/probatfm/backend/api/api.php'
};
```

#### 4. Iniciar servidor de desarrollo
```bash
npm start
```

**O bien:**
```bash
ng serve
```

El frontend estar√° disponible en: `http://localhost:4200`

**Auto-reload:** El navegador se recarga autom√°ticamente al guardar cambios.

#### 5. Build de producci√≥n (Opcional)
```bash
npm run build:prod
```

**Output:** Archivos est√°ticos en `dist/frontend/browser/`

---

## üèóÔ∏è ARQUITECTURA DEL FRONTEND

```
frontend/src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ core/                      # Servicios singleton y guards
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts    # Autenticaci√≥n
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ habilidades.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ intercambios.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ valoraciones.service.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ guards/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.guard.ts      # Protege rutas privadas
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.guard.ts     # Protege rutas admin
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ interceptors/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ http.interceptor.ts # Manejo de errores HTTP
‚îÇ   ‚îú‚îÄ‚îÄ shared/                    # Componentes compartidos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navbar/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sidebar/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ features/                  # M√≥dulos por funcionalidad
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ habilidades/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ intercambios/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ valoraciones/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ   ‚îî‚îÄ‚îÄ app.routes.ts              # Configuraci√≥n de rutas
‚îú‚îÄ‚îÄ assets/                        # Im√°genes, iconos, etc.
‚îú‚îÄ‚îÄ environments/                  # Configuraci√≥n de entornos
‚îî‚îÄ‚îÄ styles.scss                    # Estilos globales

package.json                       # Dependencias y scripts
angular.json                       # Configuraci√≥n Angular CLI
tsconfig.json                      # Configuraci√≥n TypeScript
```

---

## üì¶ DEPENDENCIAS PRINCIPALES

```json
{
  "@angular/core": "^19.2.0",
  "@angular/material": "^19.2.19",
  "@angular/router": "^19.2.0",
  "@angular/forms": "^19.2.0",
  "rxjs": "^7.8.0",
  "typescript": "~5.7.2"
}
```

---

## üîç TROUBLESHOOTING

### Problema: "Cannot GET /"

**Causa:** El servidor de desarrollo no est√° corriendo.

**Soluci√≥n:**
```bash
npm start
```

---

### Problema: "Error al conectar con el backend"

**Causa:** Backend no disponible o URL incorrecta.

**Soluci√≥n:**
1. Verificar que el backend est√© corriendo: `https://render-test-php-1.onrender.com/api.php?resource=categorias`
2. Revisar `environment.ts` ‚Üí `apiUrl`

---

### Problema: "Module not found" despu√©s de `git pull`

**Causa:** Nuevas dependencias a√±adidas.

**Soluci√≥n:**
```bash
npm install
```

---

### Problema: "Port 4200 already in use"

**Causa:** Otro proceso usa el puerto 4200.

**Soluci√≥n:**
```bash
# Opci√≥n 1: Usar otro puerto
ng serve --port 4201

# Opci√≥n 2: Matar proceso en puerto 4200 (Windows)
netstat -ano | findstr :4200
taskkill /PID <PID> /F
```

---

## üìä ESTADO DEL PROYECTO (PEC2)

### Frontend: ‚úÖ **95% IMPLEMENTADO**

**M√≥dulos completados:**
- ‚úÖ **Autenticaci√≥n completa** (login, registro, guards, interceptores)
- ‚úÖ **CRUD Habilidades** (crear, editar, pausar, eliminar, filtros)
- ‚úÖ **Sistema de Intercambios end-to-end** (proponer, aceptar, rechazar, completar)
- ‚úÖ **Sistema de Valoraciones** (modal con estrellas, comentarios, validaci√≥n)
- ‚úÖ **Mensajer√≠a** (conversaciones, enviar mensajes)
- ‚úÖ **Panel Administraci√≥n** (usuarios, reportes, estad√≠sticas)
- ‚úÖ **Notificaciones** (lista, marcar le√≠das, badge contador)
- ‚úÖ **Responsive Design** (m√≥vil, tablet, desktop)
- ‚úÖ **Material Design** (componentes Angular Material)
- ‚úÖ **Lazy Loading** (m√≥dulos cargados bajo demanda)
- ‚úÖ **Reactive Forms** (validaci√≥n en tiempo real)

---

## üìö DOCUMENTACI√ìN ADICIONAL

### Documentos t√©cnicos incluidos:

| Documento | Descripci√≥n |
|-----------|-------------|
| **`../README_PEC2.md`** | Gu√≠a general del proyecto completo |
| **`../backend/README.md`** | Documentaci√≥n del backend API |
| **`../TESTING_Y_ENDPOINTS_TFM.md`** | Testing exhaustivo de endpoints |

### Recursos externos:

- [Angular Docs](https://angular.dev)
- [Angular Material](https://material.angular.io/)
- [TypeScript Docs](https://www.typescriptlang.org/docs/)
- [RxJS](https://rxjs.dev/)

---

## üìû CONTACTO Y SOPORTE

**Autor:** Antonio Campos  
**Email:** toni.vendecasa@gmail.com  
**Universidad:** Universitat Oberta de Catalunya (UOC)  
**Proyecto:** Trabajo Final de M√°ster (TFM)  
**Asignatura:** Desarrollo de Sitios y Aplicaciones Web  
**Periodo:** Octubre-Noviembre 2025

**Repositorio GitHub:** [tonikampos/render-test-php](https://github.com/tonikampos/render-test-php)

---

## ‚öñÔ∏è LICENCIA

Este proyecto es un Trabajo Final de M√°ster para la UOC con fines acad√©micos.

- **C√≥digo fuente:** Propiedad de Antonio Campos
- **Uso:** Exclusivamente educativo
- **Redistribuci√≥n:** No permitida sin autorizaci√≥n

---

**üéì Desarrollado como parte del Trabajo Final de M√°ster (TFM) - PEC2**

**Estado:** ‚úÖ Frontend operativo y listo para evaluaci√≥n
